{% extends "base.html" %}

{% block title %}Book Appointment - Professional Physiotherapy Services{% endblock %}

{% block meta_description %}Book your physiotherapy appointment online. Quick and easy scheduling for pain relief, injury recovery, and wellness treatments.{% endblock %}

{% block content %}
<!-- Page Header -->
<section class="page-header bg-success text-white py-5">
    <div class="container text-center">
        <h1 class="display-4 fw-bold">Book Your Appointment</h1>
        <p class="lead">Take the first step towards recovery and wellness</p>
        <div class="mt-3">
            <i class="fas fa-shield-alt me-2"></i>
            <small>Secure & Confidential Booking</small>
        </div>
    </div>
</section>

<!-- Booking Benefits -->
<section class="py-4 bg-light">
    <div class="container">
        <div class="row text-center g-4">
            <div class="col-md-3">
                <i class="fas fa-clock fa-2x text-success mb-2"></i>
                <h6>Quick Booking</h6>
                <small class="text-muted">Book in under 2 minutes</small>
            </div>
            <div class="col-md-3">
                <i class="fas fa-calendar-check fa-2x text-success mb-2"></i>
                <h6>Flexible Scheduling</h6>
                <small class="text-muted">Choose your preferred time</small>
            </div>
            <div class="col-md-3">
                <i class="fas fa-user-md fa-2x text-success mb-2"></i>
                <h6>Expert Care</h6>
                <small class="text-muted">Licensed professionals</small>
            </div>
            <div class="col-md-3">
                <i class="fas fa-phone fa-2x text-success mb-2"></i>
                <h6>Confirmation Call</h6>
                <small class="text-muted">We'll confirm your appointment</small>
            </div>
        </div>
    </div>
</section>

<!-- Booking Form -->
<section class="py-5">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-lg-8">
                <div class="booking-form bg-white p-5 rounded-3 shadow">
                    <h2 class="text-center mb-4">Schedule Your Appointment</h2>
                    <form action="{{ url_for('submit_contact') }}" method="POST" id="bookingForm">
                        <input type="hidden" name="service" value="appointment-booking">
                        
                        <!-- Personal Information -->
                        <div class="form-section mb-4">
                            <h4 class="section-title mb-3">
                                <i class="fas fa-user me-2 text-primary"></i>Personal Information
                            </h4>
                            <div class="row g-3">
                                <div class="col-md-6">
                                    <label for="name" class="form-label">Full Name *</label>
                                    <input type="text" class="form-control" id="name" name="name" required>
                                </div>
                                <div class="col-md-6">
                                    <label for="email" class="form-label">Email Address *</label>
                                    <input type="email" class="form-control" id="email" name="email" required>
                                </div>
                                <div class="col-md-6">
                                    <label for="phone" class="form-label">Phone Number *</label>
                                    <input type="tel" class="form-control" id="phone" name="phone" required>
                                </div>
                                <div class="col-md-6">
                                    <label for="age" class="form-label">Age</label>
                                    <input type="number" class="form-control" id="age" name="age" min="1" max="120">
                                </div>
                            </div>
                        </div>

                        <!-- Appointment Details -->
                        <div class="form-section mb-4">
                            <h4 class="section-title mb-3">
                                <i class="fas fa-calendar me-2 text-primary"></i>Appointment Preferences
                            </h4>
                            <div class="row g-3">
                                <div class="col-md-6">
                                    <label for="service-type" class="form-label">Service Type *</label>
                                    <select class="form-select" id="service-type" name="service-type" required>
                                        <option value="">Select a service</option>
                                        <option value="initial-consultation">Initial Consultation</option>
                                        <option value="follow-up">Follow-up Consultation</option>
                                        <option value="sports-injury">Sports Injury Treatment</option>
                                        <option value="back-neck-pain">Back & Neck Pain</option>
                                        <option value="joint-pain">Joint Pain Treatment</option>
                                        <option value="post-surgical">Post-Surgical Recovery</option>
                                        <option value="general-wellness">General Wellness & Fitness</option>
                                    </select>
                                </div>
                                <div class="col-md-6">
                                    <label for="preferred-date" class="form-label">Preferred Date</label>
                                    <input type="date" class="form-control" id="preferred-date" name="preferred-date" min="{{ today_date }}">
                                </div>
                                <div class="col-md-6">
                                    <label for="preferred-time" class="form-label">Preferred Time</label>
                                    <select class="form-select" id="preferred-time" name="preferred-time">
                                        <option value="">Select time</option>
                                        <option value="morning">Morning (8AM - 12PM)</option>
                                        <option value="afternoon">Afternoon (12PM - 5PM)</option>
                                        <option value="evening">Evening (5PM - 7PM)</option>
                                    </select>
                                </div>
                                <div class="col-md-6">
                                    <label for="urgency" class="form-label">How urgent is your need?</label>
                                    <select class="form-select" id="urgency" name="urgency">
                                        <option value="routine">Routine - within 2 weeks</option>
                                        <option value="moderate">Moderate - within 1 week</option>
                                        <option value="urgent">Urgent - within 2-3 days</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <!-- Medical Information -->
                        <div class="form-section mb-4">
                            <h4 class="section-title mb-3">
                                <i class="fas fa-notes-medical me-2 text-primary"></i>Medical Information
                            </h4>
                            <div class="row g-3">
                                <div class="col-12">
                                    <label for="condition" class="form-label">Primary Condition or Concern *</label>
                                    <textarea class="form-control" id="condition" name="message" rows="3" required placeholder="Please describe your symptoms, pain level, how the injury occurred, and any other relevant details..."></textarea>
                                </div>
                                <div class="col-md-6">
                                    <label for="pain-level" class="form-label">Current Pain Level (1-10)</label>
                                    <select class="form-select" id="pain-level" name="pain-level">
                                        <option value="">Select pain level</option>
                                        <option value="1-2">1-2 (Mild)</option>
                                        <option value="3-4">3-4 (Moderate)</option>
                                        <option value="5-6">5-6 (Significant)</option>
                                        <option value="7-8">7-8 (Severe)</option>
                                        <option value="9-10">9-10 (Extreme)</option>
                                    </select>
                                </div>
                                <div class="col-md-6">
                                    <label for="duration" class="form-label">How long have you had this condition?</label>
                                    <select class="form-select" id="duration" name="duration">
                                        <option value="">Select duration</option>
                                        <option value="recent">Recent (less than 1 week)</option>
                                        <option value="short">Short-term (1-4 weeks)</option>
                                        <option value="moderate">Moderate (1-3 months)</option>
                                        <option value="long">Long-term (3+ months)</option>
                                    </select>
                                </div>
                                <div class="col-12">
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="first-time" name="first-time">
                                        <label class="form-check-label" for="first-time">
                                            This is my first time seeking physiotherapy
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Consultation Type -->
                        <div class="form-section mb-4">
                            <h4 class="section-title mb-3">
                                <i class="fas fa-video me-2 text-primary"></i>Consultation Type & Payment
                            </h4>
                            <div class="row g-3">
                                <div class="col-12">
                                    <label for="consultation-type" class="form-label">Preferred Consultation Type *</label>
                                    <div class="row g-3">
                                        <div class="col-md-6">
                                            <div class="card h-100">
                                                <div class="card-body text-center">
                                                    <input type="radio" class="form-check-input" id="in-person" name="consultation-type" value="in-person" required>
                                                    <label class="form-check-label w-100 mt-2" for="in-person">
                                                        <i class="fas fa-user-md fa-2x text-primary mb-2 d-block"></i>
                                                        <strong>In-Person Consultation</strong><br>
                                                        <span class="text-success fw-bold">₹1,500</span><br>
                                                        <small class="text-muted">60-minute comprehensive evaluation</small>
                                                    </label>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="card h-100">
                                                <div class="card-body text-center">
                                                    <input type="radio" class="form-check-input" id="video-call" name="consultation-type" value="video-call" required>
                                                    <label class="form-check-label w-100 mt-2" for="video-call">
                                                        <i class="fas fa-video fa-2x text-primary mb-2 d-block"></i>
                                                        <strong>Video Consultation</strong><br>
                                                        <span class="text-success fw-bold">₹500</span><br>
                                                        <small class="text-muted">45-minute online assessment</small>
                                                    </label>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Consent -->
                        <div class="form-section mb-4">
                            <div class="form-check mb-3">
                                <input class="form-check-input" type="checkbox" id="consent-contact" name="consent-contact" required>
                                <label class="form-check-label" for="consent-contact">
                                    I consent to being contacted by PhysioWell to confirm my appointment and provide treatment information. *
                                </label>
                            </div>
                            <div class="form-check mb-3">
                                <input class="form-check-input" type="checkbox" id="privacy-policy" name="privacy-policy" required>
                                <label class="form-check-label" for="privacy-policy">
                                    I have read and agree to the Privacy Policy and Terms of Service. *
                                </label>
                            </div>
                        </div>

                        <!-- Submit Button -->
                        <div class="text-center">
                            <button type="submit" class="btn btn-success btn-lg px-5" onclick="gtag_report_conversion()">
                                <i class="fas fa-calendar-check me-2"></i>Book My Appointment
                            </button>
                            <p class="mt-3 text-muted small">
                                <i class="fas fa-info-circle me-1"></i>
                                We'll contact you within 24 hours to confirm your appointment
                            </p>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- What Happens Next -->
<section class="bg-light py-5">
    <div class="container">
        <div class="text-center mb-5">
            <h2 class="display-5 fw-bold">What Happens Next?</h2>
            <p class="lead text-muted">Here's what you can expect after booking</p>
        </div>
        <div class="row g-4">
            <div class="col-lg-3 col-md-6 text-center">
                <div class="step-card bg-white p-4 rounded-3 h-100">
                    <div class="step-number bg-primary text-white rounded-circle mx-auto mb-3 d-flex align-items-center justify-content-center" style="width: 60px; height: 60px;">
                        <span class="fw-bold">1</span>
                    </div>
                    <h5>Confirmation Call</h5>
                    <p class="text-muted small">We'll call you within 24 hours to confirm your appointment details</p>
                </div>
            </div>
            <div class="col-lg-3 col-md-6 text-center">
                <div class="step-card bg-white p-4 rounded-3 h-100">
                    <div class="step-number bg-primary text-white rounded-circle mx-auto mb-3 d-flex align-items-center justify-content-center" style="width: 60px; height: 60px;">
                        <span class="fw-bold">2</span>
                    </div>
                    <h5>Preparation</h5>
                    <p class="text-muted small">We'll send you prep instructions and intake forms to complete</p>
                </div>
            </div>
            <div class="col-lg-3 col-md-6 text-center">
                <div class="step-card bg-white p-4 rounded-3 h-100">
                    <div class="step-number bg-primary text-white rounded-circle mx-auto mb-3 d-flex align-items-center justify-content-center" style="width: 60px; height: 60px;">
                        <span class="fw-bold">3</span>
                    </div>
                    <h5>Your Visit</h5>
                    <p class="text-muted small">Comprehensive evaluation and personalized treatment plan</p>
                </div>
            </div>
            <div class="col-lg-3 col-md-6 text-center">
                <div class="step-card bg-white p-4 rounded-3 h-100">
                    <div class="step-number bg-primary text-white rounded-circle mx-auto mb-3 d-flex align-items-center justify-content-center" style="width: 60px; height: 60px;">
                        <span class="fw-bold">4</span>
                    </div>
                    <h5>Recovery Plan</h5>
                    <p class="text-muted small">Start your personalized journey to recovery and wellness</p>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Emergency Contact -->
<section class="py-4 bg-danger text-white">
    <div class="container text-center">
        <h5><i class="fas fa-exclamation-triangle me-2"></i>Need Immediate Help?</h5>
        <p class="mb-3">If you're experiencing a medical emergency, please call 102 (ambulance) or visit your nearest emergency room.</p>
        <p class="mb-0">For urgent appointments, call us directly at <strong>+91-XXXX-XXXX-XX</strong></p>
    </div>
</section>
{% endblock %}

{% block additional_scripts %}
<script>
// Set minimum date to today
document.getElementById('preferred-date').min = new Date().toISOString().split('T')[0];

// Form validation and Google Ads tracking
document.getElementById('bookingForm').addEventListener('submit', function(e) {
    // Track appointment booking
    gtag('event', 'appointment_booking', {
        event_category: 'conversion',
        event_label: 'book_appointment_form'
    });
    
    // Additional conversion tracking for Google Ads
    gtag('event', 'conversion', {
        'send_to': 'AW-CONVERSION_ID/APPOINTMENT_LABEL'
    });
});

// Track form field interactions
document.querySelectorAll('select, input').forEach(function(element) {
    element.addEventListener('focus', function() {
        gtag('event', 'form_interaction', {
            event_category: 'engagement',
            event_label: 'booking_form_field_focus'
        });
    });
});
</script>
{% endblock %}